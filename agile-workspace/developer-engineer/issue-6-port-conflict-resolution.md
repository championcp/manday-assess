# Issue #6 ç«¯å£å†²çªä¿®å¤ - ä½¿ç”¨è¯´æ˜

## ğŸ“‹ é—®é¢˜æ¦‚è¿°

ä¿®å¤äº†åç«¯æœåŠ¡ç«¯å£å†²çªå¯¼è‡´æ— æ³•å¯åŠ¨å¤šä¸ªå¼€å‘å®ä¾‹çš„é—®é¢˜ã€‚ç°åœ¨æ”¯æŒï¼š

- âœ… å¼€å‘ç¯å¢ƒå¤šå®ä¾‹å¹¶è¡Œå¯åŠ¨
- âœ… è‡ªåŠ¨ç«¯å£æ£€æµ‹å’Œåˆ†é…
- âœ… çµæ´»çš„ç«¯å£é…ç½®æœºåˆ¶
- âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®ä¸å—å½±å“

## ğŸ”§ è§£å†³æ–¹æ¡ˆ

### 1. åˆ›å»ºäº†ç‹¬ç«‹çš„å¼€å‘ç¯å¢ƒé…ç½®

**æ–‡ä»¶**: `src/backend/src/main/resources/application-dev.yml`

æ”¯æŒä»¥ä¸‹é…ç½®æ¨¡å¼ï¼š
- ç¯å¢ƒå˜é‡ç«¯å£é…ç½®: `SERVER_PORT` æˆ– `DEV_SERVER_PORT`
- é¢„è®¾å®ä¾‹é…ç½®: `dev-instance-1` åˆ° `dev-instance-5`
- é»˜è®¤ç«¯å£èŒƒå›´: 8080-8084

### 2. å¼€å‘äº†æ™ºèƒ½å¯åŠ¨è„šæœ¬

**æ–‡ä»¶**: `scripts/start-backend-dev.sh`

åŠŸèƒ½ç‰¹æ€§ï¼š
- ğŸ” è‡ªåŠ¨æ£€æµ‹ç«¯å£å ç”¨çŠ¶æ€
- ğŸ¯ æ™ºèƒ½ç«¯å£åˆ†é…æœºåˆ¶
- â˜• è‡ªåŠ¨Javaç¯å¢ƒæ£€æµ‹å’Œé…ç½®
- ğŸ“Š è¯¦ç»†çš„å¯åŠ¨è¿‡ç¨‹åé¦ˆ
- ğŸ¨ å½©è‰²ç»ˆç«¯è¾“å‡º

### 3. æ›´æ–°äº†ä¸»å¯åŠ¨è„šæœ¬

**æ–‡ä»¶**: `scripts/start-dev.sh`

é›†æˆäº†æ–°çš„ç«¯å£æ£€æµ‹æœºåˆ¶ï¼Œç¡®ä¿å¼€å‘ç¯å¢ƒå¯åŠ¨çš„å¯é æ€§ã€‚

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ç”¨æ³•

```bash
# è‡ªåŠ¨ç«¯å£åˆ†é…å¯åŠ¨
./scripts/start-backend-dev.sh

# æŒ‡å®šç«¯å£å¯åŠ¨
./scripts/start-backend-dev.sh auto dev 8081

# ä½¿ç”¨é¢„è®¾å®ä¾‹é…ç½®
./scripts/start-backend-dev.sh 2 dev  # ä½¿ç”¨å®ä¾‹2é…ç½®(ç«¯å£8081)
```

### å¯åŠ¨å‚æ•°è¯´æ˜

```bash
./scripts/start-backend-dev.sh [å®ä¾‹åç§°] [ç¯å¢ƒé…ç½®] [é¦–é€‰ç«¯å£]
```

- **å®ä¾‹åç§°**: `auto`(é»˜è®¤), `1-5`(é¢„è®¾å®ä¾‹), `instance-1`åˆ°`instance-5`
- **ç¯å¢ƒé…ç½®**: `dev`(é»˜è®¤)
- **é¦–é€‰ç«¯å£**: æŒ‡å®šç«¯å£å·ï¼Œå¦‚æœè¢«å ç”¨ä¼šè‡ªåŠ¨å¯»æ‰¾å¯ç”¨ç«¯å£

### ç¯å¢ƒå˜é‡é…ç½®

```bash
# ä½¿ç”¨ç¯å¢ƒå˜é‡è®¾ç½®ç«¯å£
export SERVER_PORT=8085
./scripts/start-backend-dev.sh

# æˆ–è€…
export DEV_SERVER_PORT=8086
./scripts/start-backend-dev.sh
```

## ğŸ“Š ç«¯å£åˆ†é…ç­–ç•¥

### é»˜è®¤ç«¯å£èŒƒå›´
| ç«¯å£ | ç”¨é€” | çŠ¶æ€æ£€æµ‹ |
|------|------|----------|
| 8080 | é»˜è®¤å¼€å‘ç«¯å£ | è‡ªåŠ¨æ£€æµ‹ |
| 8081 | å¼€å‘å®ä¾‹2 | è‡ªåŠ¨æ£€æµ‹ |
| 8082 | å¼€å‘å®ä¾‹3 | è‡ªåŠ¨æ£€æµ‹ |
| 8083 | å¼€å‘å®ä¾‹4 | è‡ªåŠ¨æ£€æµ‹ |
| 8084 | å¼€å‘å®ä¾‹5 | è‡ªåŠ¨æ£€æµ‹ |

### ç«¯å£å†²çªå¤„ç†
1. **æ£€æµ‹é˜¶æ®µ**: è‡ªåŠ¨æ‰«æ8080-8084ç«¯å£å ç”¨çŠ¶æ€
2. **åˆ†é…é˜¶æ®µ**: ä¼˜å…ˆä½¿ç”¨æŒ‡å®šç«¯å£ï¼Œè¢«å ç”¨æ—¶è‡ªåŠ¨åˆ†é…ä¸‹ä¸€ä¸ªå¯ç”¨ç«¯å£
3. **éªŒè¯é˜¶æ®µ**: ç¡®è®¤ç«¯å£å¯ç”¨æ€§åå†å¯åŠ¨æœåŠ¡

## ğŸŒ å¤šå®ä¾‹å¼€å‘åœºæ™¯

### åœºæ™¯1: å›¢é˜Ÿåä½œå¼€å‘
```bash
# å¼€å‘è€…A - å‰ç«¯å¼€å‘
./scripts/start-backend-dev.sh auto dev 8080

# å¼€å‘è€…B - APIæµ‹è¯•
./scripts/start-backend-dev.sh auto dev 8081

# å¼€å‘è€…C - æ€§èƒ½æµ‹è¯•
./scripts/start-backend-dev.sh auto dev 8082
```

### åœºæ™¯2: ç‰ˆæœ¬å¯¹æ¯”æµ‹è¯•
```bash
# å½“å‰å¼€å‘ç‰ˆæœ¬
git checkout feature/new-api
./scripts/start-backend-dev.sh auto dev 8080

# åŸºç¡€ç‰ˆæœ¬å¯¹æ¯”
git checkout master
./scripts/start-backend-dev.sh auto dev 8081
```

### åœºæ™¯3: é…ç½®ç¯å¢ƒæµ‹è¯•
```bash
# å®ä¾‹1 - æ ‡å‡†å¼€å‘é…ç½®
./scripts/start-backend-dev.sh 1 dev

# å®ä¾‹2 - ç‰¹æ®Šæµ‹è¯•é…ç½®  
./scripts/start-backend-dev.sh 2 dev
```

## ğŸ”§ æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**Q: è„šæœ¬æç¤º"æœªæ‰¾åˆ°å¯ç”¨ç«¯å£"**
```bash
# æ‰©å¤§ç«¯å£æœç´¢èŒƒå›´ï¼ˆä¿®æ”¹è„šæœ¬ä¸­çš„MAX_PORTï¼‰
# æˆ–è€…åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
lsof -ti:8080 | xargs kill -9
```

**Q: Javaç¯å¢ƒæ£€æµ‹å¤±è´¥**
```bash
# æ‰‹åŠ¨è®¾ç½®Javaç¯å¢ƒ
export JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk-24.jdk/Contents/Home
export PATH=$JAVA_HOME/bin:$PATH
./scripts/start-backend-dev.sh
```

**Q: æƒé™é—®é¢˜**
```bash
# ç¡®ä¿è„šæœ¬æœ‰æ‰§è¡Œæƒé™
chmod +x scripts/start-backend-dev.sh
```

### ç«¯å£å ç”¨æ£€æŸ¥

```bash
# æŸ¥çœ‹ç«¯å£å ç”¨æƒ…å†µ
lsof -i :8080-8084

# ç»ˆæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹
lsof -ti:8081 | xargs kill -9
```

## ğŸ­ ç”Ÿäº§ç¯å¢ƒé…ç½®

ç”Ÿäº§ç¯å¢ƒé…ç½®**å®Œå…¨ä¸å—å½±å“**ï¼Œä»ç„¶ä½¿ç”¨ï¼š

```yaml
server:
  port: ${SERVER_PORT:8080}
```

æ”¯æŒé€šè¿‡ç¯å¢ƒå˜é‡åŠ¨æ€é…ç½®ï¼š
```bash
# ç”Ÿäº§ç¯å¢ƒç«¯å£é…ç½®
export SERVER_PORT=80
```

## âœ… éªŒè¯æµ‹è¯•

### åŠŸèƒ½éªŒè¯æ¸…å•

- [x] ç«¯å£æ£€æµ‹æœºåˆ¶æ­£å¸¸å·¥ä½œ
- [x] è‡ªåŠ¨ç«¯å£åˆ†é…åŠŸèƒ½æ­£ç¡®
- [x] Javaç¯å¢ƒè‡ªåŠ¨æ£€æµ‹æˆåŠŸ
- [x] å¤šå®ä¾‹å¹¶è¡Œå¯åŠ¨æ— å†²çª
- [x] ç”Ÿäº§ç¯å¢ƒé…ç½®æœªå—å½±å“
- [x] å¯åŠ¨è„šæœ¬é›†æˆå®Œæˆ

### æµ‹è¯•å‘½ä»¤

```bash
# åŸºç¡€åŠŸèƒ½æµ‹è¯•
./scripts/start-backend-dev.sh auto dev 8083

# å¤šå®ä¾‹æµ‹è¯•ï¼ˆåœ¨ä¸åŒç»ˆç«¯è¿è¡Œï¼‰
./scripts/start-backend-dev.sh auto dev 8080
./scripts/start-backend-dev.sh auto dev 8081
./scripts/start-backend-dev.sh auto dev 8082

# å¥åº·æ£€æŸ¥
curl -s http://localhost:8083/actuator/health
```

## ğŸ“ˆ æ”¹è¿›æ•ˆæœ

### ä¿®å¤å‰
- âŒ ç«¯å£8080ç¡¬ç¼–ç ï¼Œæ— æ³•å¯åŠ¨å¤šå®ä¾‹
- âŒ ç«¯å£å†²çªæ—¶å¯åŠ¨å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯ä¸æ˜ç¡®
- âŒ å¼€å‘å›¢é˜Ÿæ— æ³•å¹¶è¡Œå¼€å‘æµ‹è¯•

### ä¿®å¤å  
- âœ… çµæ´»çš„ç«¯å£é…ç½®ï¼Œæ”¯æŒç¯å¢ƒå˜é‡
- âœ… æ™ºèƒ½ç«¯å£æ£€æµ‹ï¼Œè‡ªåŠ¨å†²çªè§£å†³
- âœ… å®Œæ•´çš„å¯åŠ¨è„šæœ¬ï¼Œç”¨æˆ·ä½“éªŒå‹å¥½
- âœ… æ”¯æŒæœ€å¤š5ä¸ªå¹¶è¡Œå¼€å‘å®ä¾‹
- âœ… ä¿æŒç”Ÿäº§ç¯å¢ƒé…ç½®çš„ç¨³å®šæ€§

---

**ç»´æŠ¤äººå‘˜**: Developer Engineer  
**è§£å†³æ—¶é—´**: 2025-09-13  
**ç›¸å…³æ–‡ä»¶**: 
- `/Users/chengpeng/traeWorkspace/manday-assess/src/backend/src/main/resources/application-dev.yml`
- `/Users/chengpeng/traeWorkspace/manday-assess/scripts/start-backend-dev.sh`
- `/Users/chengpeng/traeWorkspace/manday-assess/scripts/start-dev.sh`