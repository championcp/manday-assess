# Sprint 2 - 项目管理界面设计方案

## 一、项目管理界面总体设计

### 1. 设计目标
- **政府部门专业性：** 界面体现政府机构的权威性和严肃性
- **操作高效性：** 简化工作流程，提高评估工作效率
- **数据可追溯：** 所有操作都有完整的记录和追溯机制
- **用户友好性：** 符合政府工作人员的使用习惯

### 2. 核心页面架构
```
项目管理模块
├── 项目列表页面 (ProjectList)
├── 项目创建页面 (ProjectCreate) 
├── 项目详情页面 (ProjectDetail)
├── 项目编辑页面 (ProjectEdit)
└── 项目状态管理页面 (ProjectStatus)
```

## 二、项目列表页面设计

### 1. 页面布局设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                              项目管理 - 项目列表                            │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌─ 快速操作区 ─────────────────────────────────────────────────────────┐    │
│ │ [+ 新建项目]  [📥 批量导入]  [📊 统计报表]  [⚙️ 系统设置]      │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│ ┌─ 搜索和筛选区 ───────────────────────────────────────────────────────┐    │
│ │ 项目名称: [___________________] 项目状态: [全部 ▼] 创建时间: [____]  │    │
│ │ 创建人: [___________] 优先级: [全部 ▼] 更多筛选: [展开 ▼]        │    │
│ │                                          [🔍 搜索] [重置]         │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│ ┌─ 项目列表区 ─────────────────────────────────────────────────────────┐    │
│ │ ☐ 全选  │项目编号│  项目名称  │项目状态│创建人│创建时间│优先级│操作│ │    │
│ │ ────────┼───────┼───────────┼──────┼────┼──────┼────┼────┤ │    │
│ │ ☐      │P2024001│某系统升级改造│进行中 │张三  │2024-01 │高  │查看│ │    │
│ │ ☐      │P2024002│新建管理平台  │待审批 │李四  │2024-01 │中  │编辑│ │    │
│ │ ☐      │P2024003│数据中心建设  │已完成 │王五  │2023-12 │低  │详情│ │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│ ┌─ 批量操作区 ─────────────────────────────────────────────────────────┐    │
│ │ 已选择 3 个项目  [批量删除] [批量导出] [批量审批] [批量归档]          │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
│                                                                             │
│ ┌─ 分页区 ─────────────────────────────────────────────────────────────┐    │
│ │ 显示 1-20 条，共 156 条记录  [< 上一页] [1][2][3]...[8] [下一页 >]    │    │
│ └─────────────────────────────────────────────────────────────────────┘    │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2. 交互设计规范

#### 搜索筛选交互
- **智能搜索：** 支持项目编号、项目名称的模糊搜索
- **联动筛选：** 筛选条件之间智能联动，避免无效筛选结果
- **记忆功能：** 保存用户的搜索历史和常用筛选条件
- **实时提示：** 输入时显示匹配建议

#### 表格操作交互
- **排序功能：** 点击表头可按该字段升序/降序排列
- **行选择：** 支持单选、多选、全选操作
- **快速操作：** 悬停行时显示快速操作按钮
- **状态标识：** 用不同颜色标识不同项目状态

### 3. 响应式设计

```
桌面端 (≥1024px):
- 显示完整表格，12列布局
- 侧边栏固定，主内容区自适应

平板端 (768px-1024px):  
- 表格列数适当减少，隐藏次要列
- 搜索区域折叠为抽屉式
- 8列栅格布局

移动端 (<768px):
- 表格转为卡片式布局
- 搜索筛选折叠为浮层
- 4列栅格布局，垂直堆叠
```

## 三、项目创建页面设计

### 1. 步骤向导式设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                           新建评估项目 - 创建向导                           │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ 步骤导航: ● 基本信息 → ○ 项目详情 → ○ 参数配置 → ○ 确认提交                │
│          (1/4)                                                              │
│                                                                             │
│ ┌─ 第一步：基本信息 ───────────────────────────────────────────────────────┐ │
│ │                                                                         │ │
│ │ 项目名称 *    [________________________________]                       │ │
│ │ 项目编号 *    [P2024____] (系统自动生成，可修改)                         │ │
│ │                                                                         │ │
│ │ 项目类型 *    (o) 新建系统  (o) 系统升级  (o) 系统改造                   │ │
│ │ 项目规模      (o) 大型     (o) 中型       (o) 小型                      │ │
│ │                                                                         │ │
│ │ 委托单位 *    [________________________________]                       │ │
│ │ 联系人       [________________] 联系电话 [_______________]               │ │
│ │                                                                         │ │
│ │ 项目描述      [________________________________]                       │ │
│ │              [________________________________]                       │ │
│ │              [________________________________]                       │ │
│ │                                                                         │ │
│ │ 预计工期      开始时间 [2024-01-01] 结束时间 [2024-12-31]                │ │
│ │ 优先级        (o) 高    (o) 中    (o) 低                               │ │
│ │                                                                         │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│                    [取消]              [保存草稿]      [下一步 >]          │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2. 表单验证设计

#### 实时验证规则
```javascript
// 表单验证规范示例
验证规则 = {
  项目名称: {
    required: true,
    minLength: 2,
    maxLength: 50,
    pattern: /^[\u4e00-\u9fa5a-zA-Z0-9\s]+$/,  // 中文、英文、数字、空格
    message: '项目名称为必填项，2-50个字符，支持中英文和数字'
  },
  
  项目编号: {
    required: true,
    pattern: /^P\d{7}$/,  // P + 7位数字
    unique: true,  // 检查唯一性
    message: '项目编号格式：P + 7位数字，如P2024001'
  },
  
  委托单位: {
    required: true,
    minLength: 2,
    maxLength: 100,
    message: '委托单位为必填项，2-100个字符'
  }
}
```

#### 错误提示设计
```css
/* 错误状态样式 */
.form-field.error {
  border-color: #dc2626;
  box-shadow: 0 0 0 3px rgba(220, 38, 38, 0.1);
}

.error-message {
  color: #dc2626;
  font-size: 12px;
  margin-top: 4px;
  display: flex;
  align-items: center;
}

.error-message::before {
  content: "⚠️";
  margin-right: 4px;
}
```

### 3. 数据保存机制

#### 自动保存功能
- **定时保存：** 每30秒自动保存用户输入
- **离开页面保存：** 用户离开页面时提示保存
- **数据恢复：** 页面刷新后恢复之前输入的数据
- **版本管理：** 保存多个版本，支持回退

#### 草稿管理
- **草稿列表：** 在项目列表中显示草稿状态
- **继续编辑：** 快速进入草稿继续编辑
- **草稿清理：** 定期清理超过30天的草稿

## 四、项目详情页面设计

### 1. 详情页布局设计

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                     项目详情 - 某系统升级改造项目                          │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                             │
│ ┌─ 项目概览卡片 ───────────────────────────────────────────────────────────┐ │
│ │ 项目编号: P2024001        状态: [进行中]     创建时间: 2024-01-15        │ │
│ │ 创建人: 张三               优先级: [高]      最后修改: 2024-01-20        │ │
│ │                           [编辑项目] [功能点计算] [生成报告] [提交审批]   │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ┌─ 标签页导航 ─────────────────────────────────────────────────────────────┐ │
│ │ [基本信息] [功能点分析] [成本估算] [审批流程] [文档附件] [操作日志]      │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ┌─ 基本信息标签页 ─────────────────────────────────────────────────────────┐ │
│ │                                                                         │ │
│ │ ┌─ 项目基本信息 ─────────────┐ ┌─ 技术信息 ─────────────────────────────┐ │ │
│ │ │ 项目名称: 某系统升级改造    │ │ 开发语言: Java, Vue.js             │ │ │
│ │ │ 委托单位: XX市政府         │ │ 数据库: PostgreSQL, Redis          │ │ │  
│ │ │ 项目类型: 系统升级         │ │ 架构类型: 微服务架构               │ │ │
│ │ │ 项目规模: 大型             │ │ 部署方式: Docker + K8s             │ │ │
│ │ └───────────────────────────┘ └───────────────────────────────────────┘ │ │
│ │                                                                         │ │
│ │ ┌─ 进度信息 ─────────────────┐ ┌─ 关键节点 ─────────────────────────────┐ │ │
│ │ │ 整体进度: ████████░░ 75%   │ │ ✅ 需求分析 (2024-01-15)           │ │ │
│ │ │ 功能点计算: 已完成         │ │ ✅ 方案设计 (2024-01-20)           │ │ │
│ │ │ 成本估算: 进行中           │ │ 🔄 成本评估 (进行中)               │ │ │
│ │ │ 审批流程: 未开始           │ │ ⏳ 专家评审 (待开始)               │ │ │
│ │ └───────────────────────────┘ └───────────────────────────────────────┘ │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│                         [返回列表] [编辑] [删除] [导出详情]                │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 2. 标签页内容设计

#### 功能点分析标签页
```
┌─ 功能点分析 ─────────────────────────────────────────────────────────────────┐
│                                                                             │
│ ┌─ 计算结果概览 ───────────────────────────────────────────────────────────┐ │
│ │ 总功能点数: 156 FP    未调整功能点: 142 FP    VAF调整因子: 1.10          │ │
│ │ 计算状态: ✅ 已完成     最后计算: 2024-01-20 14:30    计算用时: 2分35秒    │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ┌─ 功能点构成 ─────────────────────────────────────────────────────────────┐ │
│ │ 📊 功能点分布图表                                                        │ │
│ │ ┌─────────────────┐                                                      │ │
│ │ │   ILF: 45 FP   ░░░░░░░░░░░░░░░░░░░░                                   │ │
│ │ │   EIF: 23 FP   ░░░░░░░░░░                                             │ │
│ │ │   EI:  38 FP   ░░░░░░░░░░░░░░░░                                       │ │
│ │ │   EO:  32 FP   ░░░░░░░░░░░░░                                          │ │
│ │ │   EQ:  18 FP   ░░░░░░░                                                │ │
│ │ └─────────────────┘                                                      │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ┌─ 详细计算数据 ───────────────────────────────────────────────────────────┐ │
│ │ │元素类型│数量│简单│中等│复杂│功能点数│说明                              │ │
│ │ ├──────┼──┼──┼──┼──┼──────┼────────────────────────────────┤ │
│ │ │ILF    │8 │2 │4 │2 │45    │用户表、权限表、项目表等              │ │
│ │ │EIF    │5 │1 │3 │1 │23    │外部系统接口                        │ │
│ │ │EI     │12│3 │7 │2 │38    │数据录入、修改、删除功能              │ │
│ │ │EO     │9 │2 │5 │2 │32    │报表输出、数据导出                  │ │
│ │ │EQ     │7 │4 │2 │1 │18    │查询功能                           │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│                              [重新计算] [导出数据] [打印报告]               │
└─────────────────────────────────────────────────────────────────────────────┘
```

#### 成本估算标签页
```
┌─ 成本估算 ───────────────────────────────────────────────────────────────────┐
│                                                                             │
│ ┌─ 估算结果 ───────────────────────────────────────────────────────────────┐ │
│ │ 💰 软件开发费用                                                          │ │
│ │                                                                         │ │
│ │ 基础开发费: ¥1,248,000    调整后费用: ¥1,372,800                        │ │
│ │ 非人力成本: ¥137,280      项目总费用: ¥1,510,080                        │ │
│ │                                                                         │ │
│ │ 📊 费用构成                                                              │ │
│ │ ├─ 人力成本: ¥1,372,800 (90.9%)                                        │ │
│ │ ├─ 设备成本: ¥82,368 (5.5%)                                            │ │
│ │ ├─ 软件采购: ¥27,456 (1.8%)                                            │ │
│ │ └─ 其他费用: ¥27,456 (1.8%)                                            │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│ ┌─ 计算参数 ───────────────────────────────────────────────────────────────┐ │
│ │ 软件类别因子: 1.0      质量特性系数: 1.1     信创调整系数: 1.0            │ │
│ │ 基准生产率: 12 FP/人月  折算系数: 1.0       人月费用: ¥8,000            │ │
│ │ 非人力成本比例: 10%                                                      │ │
│ └─────────────────────────────────────────────────────────────────────────┘ │
│                                                                             │
│                              [参数调整] [重新计算] [导出估算]               │
└─────────────────────────────────────────────────────────────────────────────┘
```

### 3. 状态管理设计

#### 项目状态流转
```javascript
// 状态流转规则
projectStatus = {
  '草稿': {
    next: ['待提交'],
    actions: ['编辑', '删除', '提交'],
    color: '#6b7280'  // 灰色
  },
  
  '待提交': {
    next: ['进行中', '草稿'],
    actions: ['编辑', '提交', '取消'],
    color: '#d97706'  // 黄色
  },
  
  '进行中': {
    next: ['待审批', '暂停', '草稿'],
    actions: ['编辑', '暂停', '提交审批'],
    color: '#3b82f6'  // 蓝色
  },
  
  '暂停': {
    next: ['进行中', '取消'],
    actions: ['继续', '取消'],
    color: '#f59e0b'  // 橙色
  },
  
  '待审批': {
    next: ['审批中', '进行中'],
    actions: ['查看', '撤回'],
    color: '#8b5cf6'  // 紫色
  },
  
  '审批中': {
    next: ['已通过', '已拒绝'],
    actions: ['查看'],
    color: '#06b6d4'  // 青色
  },
  
  '已通过': {
    next: ['归档'],
    actions: ['查看', '归档'],
    color: '#16a34a'  // 绿色
  },
  
  '已拒绝': {
    next: ['进行中'],
    actions: ['查看', '修改'],
    color: '#dc2626'  // 红色
  },
  
  '归档': {
    next: [],
    actions: ['查看', '导出'],
    color: '#4b5563'  // 深灰色
  }
}
```

## 五、交互动效设计

### 1. 页面切换动效
```css
/* 页面切换动画 */
.page-enter-active, .page-leave-active {
  transition: all 0.3s ease;
}

.page-enter-from {
  opacity: 0;
  transform: translateX(20px);
}

.page-leave-to {
  opacity: 0;
  transform: translateX(-20px);
}
```

### 2. 状态变更动效
```css
/* 状态标签变更动画 */
.status-badge {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.status-badge.updating {
  animation: pulse 1s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}
```

### 3. 操作反馈动效
```css
/* 按钮点击反馈 */
.btn-feedback {
  position: relative;
  overflow: hidden;
}

.btn-feedback::after {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.5);
  transform: translate(-50%, -50%);
  transition: width 0.6s, height 0.6s;
}

.btn-feedback.clicked::after {
  width: 300px;
  height: 300px;
}
```

## 六、可访问性设计

### 1. 键盘导航支持
- **Tab键导航：** 所有交互元素支持Tab键顺序访问
- **回车键操作：** 按钮和链接支持回车键激活
- **ESC键退出：** 模态框和下拉菜单支持ESC键关闭
- **方向键导航：** 表格和列表支持方向键导航

### 2. 屏幕阅读器支持
```html
<!-- 语义化标记示例 -->
<main aria-label="项目管理主界面">
  <section aria-labelledby="project-list-title">
    <h2 id="project-list-title">项目列表</h2>
    
    <table role="table" aria-label="项目数据表格">
      <thead>
        <tr>
          <th scope="col" aria-sort="none">项目编号</th>
          <th scope="col" aria-sort="ascending">项目名称</th>
          <th scope="col" aria-sort="none">状态</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td aria-describedby="project-P2024001">P2024001</td>
          <td>某系统升级改造</td>
          <td>
            <span class="status-badge status-active" 
                  aria-label="项目状态：进行中">进行中</span>
          </td>
        </tr>
      </tbody>
    </table>
  </section>
</main>
```

### 3. 颜色对比度优化
```css
/* 确保足够的颜色对比度 */
:root {
  --text-primary: #111827;      /* 对比度 > 4.5:1 */
  --text-secondary: #374151;    /* 对比度 > 4.5:1 */
  --text-disabled: #9ca3af;     /* 对比度 > 3:1 */
  
  --bg-primary: #ffffff;
  --bg-secondary: #f9fafb;
  
  --focus-ring: 0 0 0 3px rgba(30, 58, 138, 0.1);
}

.focus-visible {
  outline: 2px solid #1e3a8a;
  outline-offset: 2px;
}
```

## 七、性能优化设计

### 1. 虚拟滚动设计
```javascript
// 大数据表格虚拟滚动实现
const VirtualTable = {
  props: {
    items: Array,
    itemHeight: Number
  },
  
  data() {
    return {
      visibleStart: 0,
      visibleEnd: 20,
      scrollTop: 0
    }
  },
  
  computed: {
    visibleItems() {
      return this.items.slice(this.visibleStart, this.visibleEnd)
    },
    
    totalHeight() {
      return this.items.length * this.itemHeight
    }
  },
  
  methods: {
    handleScroll(e) {
      this.scrollTop = e.target.scrollTop
      this.updateVisibleRange()
    },
    
    updateVisibleRange() {
      const containerHeight = 400  // 容器高度
      this.visibleStart = Math.floor(this.scrollTop / this.itemHeight)
      this.visibleEnd = Math.min(
        this.visibleStart + Math.ceil(containerHeight / this.itemHeight) + 1,
        this.items.length
      )
    }
  }
}
```

### 2. 数据懒加载设计
```javascript
// 分页数据懒加载
const ProjectList = {
  data() {
    return {
      projects: [],
      loading: false,
      hasMore: true,
      currentPage: 1,
      pageSize: 20
    }
  },
  
  methods: {
    async loadMore() {
      if (this.loading || !this.hasMore) return
      
      this.loading = true
      
      try {
        const response = await projectAPI.getProjects({
          page: this.currentPage,
          size: this.pageSize
        })
        
        this.projects.push(...response.data.items)
        this.currentPage++
        this.hasMore = response.data.hasMore
        
      } catch (error) {
        console.error('加载项目列表失败:', error)
      } finally {
        this.loading = false
      }
    },
    
    // 检测滚动到底部
    handleScroll() {
      const scrollTop = document.documentElement.scrollTop
      const windowHeight = window.innerHeight
      const documentHeight = document.documentElement.scrollHeight
      
      if (scrollTop + windowHeight >= documentHeight - 100) {
        this.loadMore()
      }
    }
  }
}
```

## 八、组件化设计

### 1. 通用组件设计
```javascript
// 项目状态组件
const ProjectStatus = {
  props: {
    status: {
      type: String,
      required: true
    },
    size: {
      type: String,
      default: 'medium'
    }
  },
  
  computed: {
    statusConfig() {
      const configs = {
        '草稿': { color: '#6b7280', icon: '📝' },
        '进行中': { color: '#3b82f6', icon: '🔄' },
        '待审批': { color: '#8b5cf6', icon: '⏳' },
        '已完成': { color: '#16a34a', icon: '✅' }
      }
      return configs[this.status] || configs['草稿']
    }
  },
  
  template: `
    <span class="status-badge"
          :class="[\`status-\${size}\`]"
          :style="{ backgroundColor: statusConfig.color }">
      <span class="status-icon">{{ statusConfig.icon }}</span>
      <span class="status-text">{{ status }}</span>
    </span>
  `
}

// 数据表格组件
const DataTable = {
  props: {
    columns: Array,
    data: Array,
    loading: Boolean,
    selectable: Boolean
  },
  
  emits: ['sort', 'select', 'row-click'],
  
  template: `
    <div class="data-table">
      <table class="table">
        <thead>
          <tr>
            <th v-if="selectable" class="select-column">
              <input type="checkbox" v-model="allSelected" @change="toggleSelectAll">
            </th>
            <th v-for="column in columns" 
                :key="column.key"
                :class="[\`column-\${column.key}\`, { sortable: column.sortable }]"
                @click="column.sortable && handleSort(column.key)">
              {{ column.title }}
              <span v-if="column.sortable" class="sort-indicator">
                {{ getSortIcon(column.key) }}
              </span>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="(item, index) in data" 
              :key="item.id || index"
              @click="$emit('row-click', item)">
            <td v-if="selectable" class="select-column">
              <input type="checkbox" v-model="selectedItems" :value="item.id">
            </td>
            <td v-for="column in columns" :key="column.key">
              <slot :name="\`column-\${column.key}\`" :item="item" :value="item[column.key]">
                {{ item[column.key] }}
              </slot>
            </td>
          </tr>
        </tbody>
      </table>
      
      <div v-if="loading" class="table-loading">
        <div class="loading-spinner"></div>
        <span>数据加载中...</span>
      </div>
    </div>
  `
}
```

这个项目管理界面设计方案提供了完整的页面布局、交互规范、组件设计和技术实现指导，确保界面既符合政府系统的专业要求，又能提供良好的用户体验。